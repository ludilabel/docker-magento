#!/usr/bin/env bash
set -o errexit

source env/dev-setup-config.env
source bin/wsl-fn


if [ "$1" ]; then
  GITHUB_DEBIAN_RSA_PATH="$1"
fi

echo "Veuillez coller le chemin Windows vers le dossier /.ssh de la session utilisateur en cours"
echo "(utiliser la commande whoami dans Windows Powershell)"
read -r -p "(ex : C:\Users\franz\.ssh) : " destination_win_path

wsl_destination_win_path=$(convertWinPathToWslPath "$destination_win_path")

# Vérifier si le chemin existe
if [ ! -d "$wsl_destination_win_path" ]; then
    echo "Le chemin spécifié n'existe pas."
    exit 1
fi

cp "$GITHUB_DEBIAN_RSA_PATH" "$wsl_destination_win_path/"
echo "Le clé privée SSH a été téléchargée dans Windows."
echo "Redémarrer powershell ou PHPStorm pour sa prise en compte par le terminal."
