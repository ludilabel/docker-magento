#!/usr/bin/env bash

# Enable debugging
# set -x

# Arguments : (cf. app/etc/env.php pour recette)
# $1 : recette_db_user (Optionnel) nom utilisateur Mariadb du serveur recette
# $2 : recette_db_pass (Optionnel) mot de passe de la base de données du serveur recette
# $3 : recette_db_name (Optionnel) nom de la base de données du serveur recette

if [ "$1" ]; then
  recette_db_user="$1"
else
  echo "Veuillez saisir le nom d'utilisateur de la base de données de recette"
  read -r -p "(ex : magento_user) : " recette_db_user
fi

if [ "$2" ]; then
  recette_db_pass="$2"
else
  echo "Veuillez coller le mot de passe de la base de données recette"
  read -r -p "(ex : fkjdfifsqdKJdiLKj) : " recette_db_pass
fi

if [ "$3" ]; then
  recette_db_name="$3"
else
  echo "Veuillez saisir le nom de la base de données de recette"
  read -r -p "(ex : magento) : " recette_db_name
fi


# Mise a jour des variables de configuration dans le fichier env/dev-setup-config.env
sed -i "s|^RECETTE_DB_USER=.*|RECETTE_DB_USER=\"$recette_db_user\"|" env/dev-setup-config.env
sed -i "s|^RECETTE_DB_PASS=.*|RECETTE_DB_PASS=\"$recette_db_pass\"|" env/dev-setup-config.env
sed -i "s|^RECETTE_DB_NAME=.*|RECETTE_DB_NAME=\"$recette_db_name\"|" env/dev-setup-config.env
